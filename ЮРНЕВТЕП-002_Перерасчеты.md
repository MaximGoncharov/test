ЮРНЕВТЕП-002

***ЗАДАЧА:*** Реализовать алгоритм начислений с учетом изменений, внесенных за прошлый месяц, но не вошедшие в расчет.

***ДЛЯ ЧЕГО НЕОБХОДИМО:*** В расчете нужно учитывать изменения, внесенные в расчетном месяце, но после проведения начислений и выписки пакета документов (акт, счет, счет-фактура).

***КОНТЕКСТ:*** В «1С:Бухгалтерия 8» в модуле «Теплосеть: Расчеты с юридическими лицами» допускается один расчет за месяц (один пакет документов: акт, счет на оплату, счет-фактура). Предполагается, что расчет будет выполнен с учетом всех изменений за месяц, которые могут повлиять на начисления. Однако, в методике работы АО «Теплосеть» имеется особенность – расчет по контрагентам, потребляющих по договорным объемам, производится 20 числа. Соответственно, изменения внесенные после 20 числа месяца, не войдут в расчет текущего месяца (отраженные в бухгалтерии документы не подлежат изменению) и не отразятся на расчете следующего месяца (будет считаться, что предыдущий месяц рассчитан полностью, т.к. есть начисления и комплект бухгалтерских документов).

На текущей момент, установлены следующие причины перерасчетов

-   Подключение (отключение) объектов (услуг) в учетном месяце после того как уже был произведен и расчет и выписаны за этот месяц.

-   Подключение (отключение) приборов учета в учетном месяце после того как уже был произведен и расчет и выписаны документы за этот месяц.

-   Необходимость уменьшить/увеличить сумма начислений на определенную сумму для выписки документам бюджетникам согласно их письмо из-за лимитов финансирования

***РЕАЛИЗАЦИЯ:***

В документах, влияющих на возникновение перерасчета и соответствующих регистрах будет реквизит «Дата операции».

Перечень документов:

-   Параметры договора;

-   Подключение (отключение) услуг;

-   Установка водомера;

-   Установка тепломера.

При начислении будет выполняться следующая проверка:

если в расчетном месяце (месяц, в котором делаем начисления и выписываем документы) были операции по изменению состояния услуги (действует/не действует) или режима начисления по услуге (например, был режим «По договору» , стал «По счетчику») и дата операции относится к предыдущему месяцу (или ранее) запускается процедура перерасчета: высчитывается количество дней, за которые нужно пересчитать, суточное потребление, а затем вычисляется объем, который нужно начислить за период перерасчета (среднесуточное потребление \* количество дней перерасчета). Рассчитанный объем будет начислен с указанием периода перерасчета и типом начисления «Перерасчет»

Если необходимо уменьшить/увеличить на определенную сумму в текущем месяце, то оператор в произведенный расчет добавляет/уменьшает сумму, происходит перерасчет суммы в натуральные показатели и добавляет в расчет одной строкой с признаком «Перерасчет в следующем периоде». В следующем расчетном периоде добавленная строка добавляется в расчет с противоположным знаком (сторнируется).

***ПРИМЕРЫ:***

***Перерасчет по причине***

-   Подключение (отключение) объектов (услуг) в учетном месяце после того как уже был произведен и расчет и выписаны за этот месяц.

\* *Пример 1:* Контрагент рассчитывается по договорным объемам (июнь -30 Гкал, июль - 30 Гкал), ему был выписан счет 20.06.2016 на 30 Гкал, потом 25.06.2016 контрагент был отключен и это оформляется документом от 01.07.2016 (т.е. дата документа в том месяце, в котором нужно сделать перерасчет).

Таблица – Расчет по примеру 1

| Месяц расчета | Дата расчета | Режим начисления                                                        | Расчетный объем                 | Итого, Гкал |
|---------------|--------------|-------------------------------------------------------------------------|---------------------------------|-------------|
| Июнь, 2016    | 20.06.2016   | По договорным объемам                                                   | 30 Гкал                         | 30 Гкал     |
| Июль, 2016    | 20.07.2016   | Перерасчет (По договорным объемам за период с 25.06.2016 по 30.06.2016) | -5Гкал (30 Гкал/30дней \*5дней) | 25 Гкал     |
|               |              | По договорным объемам                                                   | 30 Гкал                         |             |

-   Подключение (отключение) приборов учета в учетном месяце после того как уже был произведен и расчет и выписаны за этот месяц.

\* *Пример 2:* Контрагент рассчитывается по договорным объемам (июнь - 30 Гкал, июль - 30 Гкал). После этого (25.06.2016) контрагенту был установлен прибор учета с показаниями 1 и оформлено это было документом с датой от 01.07.2016 года (т.е. дата документа в том месяце, в котором нужно сделать перерасчет). В июле (18.07.2016) контрагент передал показания 7.

Таблица - Расчет по примеру 2

| Месяц расчета | Дата расчета | Режим начисления                                                        | Расчетный объем                 | Итого, Гкал |
|---------------|--------------|-------------------------------------------------------------------------|---------------------------------|-------------|
| Июнь, 2016    | 20.06.2016   | По договорным объемам                                                   | 30 Гкал                         | 30 Гкал     |
| Июль, 2016    | 20.07.2016   | Перерасчет (По договорным объемам за период с 25.06.2016 по 30.06.2016) | -5Гкал (30 Гкал/30дней \*5дней) | 1 Гкал      |
|               |              | По прибору учета                                                        | 6 Гкал (7 - 1)                  |             |

\* *Пример 3:* Абоненту было начислено в декабре 4 Гкал на сумму 5000 рублей. Абонент прислал письмо, что ему в декабре месяце нужен акт на сумму 4200 рублей. Добавляем строку со снятием 800 рублей. В январе возвращаем эту строку на 800 рублей плюс начисление за январь составили 3 гКал на сумму 4350 рублей.

<table>
<thead>
<tr class="header">
<th>Месяц расчета</th>
<th>Дата расчета</th>
<th>Начислен объем</th>
<th>Начислено сумма, руб</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Декабрь, 2016</td>
<td>31.12.2016</td>
<td><p>4 Гкал</p>
<p>- 0,64 Гкал</p></td>
<td><p>5000 рублей</p>
<p>- 800 рублей</p>
<p><strong>Итого: 4200 </strong></p></td>
</tr>
<tr class="even">
<td>Январь, 2017</td>
<td>31.01.2017</td>
<td><p>+ 0,64 Гкал</p>
<p>3 Гкал</p></td>
<td><p>800 рублей</p>
<p>4350 рублей<br />
<strong>Итого: 5150</strong></p></td>
</tr>
</tbody>
</table>

***СВЯЗАННЫЕ ЗАДАЧИ***
